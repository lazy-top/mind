<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>æ¬¢è¿æ¥åˆ°å¿ƒè†å®ˆæŠ¤</title>
		<!-- å¼•å…¥ Vue å’Œ Vuetify çš„ JS -->
		<script src="../js/vue.js"></script>
		<script src="../js/vuetify.js"></script>
		<script src="../js/socket.io.min.js"></script>
		<script src="../js/axios.min.js"></script>
		<script src="../js/vuex.global.min.js"></script>
		<script src="../js/global_login.js"></script>
		<link href="https://unpkg.com/vis-network/styles/vis-network.min.css" rel="stylesheet" type="text/css" />
		<script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
		<!-- å¼•å…¥ Vuetify çš„ CSS -->
		<link href="../css/materialdesignicons.min.css" rel="stylesheet">
		<link href="../css/vuetify.min.css" rel="stylesheet">
		<meta name="viewport"
			content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

	</head>
	<body>
		<div id="app">
			<!-- ç”¨æˆ·æ“ä½œ -->
			<v-menu v-model="menuOpen" :close-on-content-click="false" :nudge-right="40" offset-y>
				<template v-slot:activator="{ on }">
					<v-btn icon v-on="on">
						<v-icon>mdi-dots-vertical</v-icon>
					</v-btn>
				</template>
				<v-list>
					<v-list-item @click="viewProfile">
						<v-list-item-icon>
							<v-icon>mdi-account</v-icon>
						</v-list-item-icon>
						<v-list-item-title>æŸ¥çœ‹ä¸ªäººèµ„æ–™</v-list-item-title>
					</v-list-item>
					<v-list-item @click="changePassword">
						<v-list-item-icon>
							<v-icon>mdi-lock</v-icon>
						</v-list-item-icon>
						<v-list-item-title>ä¿®æ”¹å¯†ç </v-list-item-title>
					</v-list-item>
					<v-divider></v-divider>
					<v-list-item @click="logout">
						<v-list-item-icon>
							<v-icon>mdi-logout</v-icon>
						</v-list-item-icon>
						<v-list-item-title>é€€å‡ºç™»å½•</v-list-item-title>
					</v-list-item>
				</v-list>
			</v-menu>

			<!-- æŸ¥çœ‹ä¸ªäººèµ„æ–™å¯¹è¯æ¡† -->
			<v-dialog v-model="profileDialog" max-width="500px">
				<v-card>
					<v-card-title>ä¸ªäººèµ„æ–™</v-card-title>
					<v-card-text>
						<v-form ref="profileForm">
							<v-text-field label="ç”¨æˆ·å" v-model="userProfile.username" readonly></v-text-field>
							<v-text-field label="é‚®ç®±" v-model="userProfile.email" readonly></v-text-field>
						</v-form>
					</v-card-text>
					<v-card-actions>
						<v-btn color="primary" @click="profileDialog = false">å…³é—­</v-btn>
					</v-card-actions>
				</v-card>
			</v-dialog>


			<!-- ç³»ç»Ÿè®¾ç½® -->
			<v-dialog v-model="settingsDialog" max-width="500">
				<v-card>
					<v-card-title class="headline">ç³»ç»Ÿè®¾ç½®</v-card-title>
					<v-card-text>
						<!-- éšç§è®¾ç½® -->
						<v-checkbox v-model="showProfile" label="æ˜¾ç¤ºä¸ªäººèµ„æ–™"></v-checkbox>
						<!-- é€šçŸ¥è®¾ç½® -->
						<v-select v-model="notificationType" :items="notificationTypes" label="é€šçŸ¥ç±»å‹"></v-select>
						<v-checkbox v-model="receiveEmail" label="æ¥æ”¶é‚®ä»¶é€šçŸ¥"></v-checkbox>

						<!-- è¯­è¨€è®¾ç½® -->
						<v-select v-model="language" :items="languages" label="è¯­è¨€"></v-select>
					</v-card-text>

					<v-card-actions>
						<v-spacer></v-spacer>
						<v-btn color="primary" @click="saveSettings">ä¿å­˜</v-btn>
						<v-btn @click="closeSettingsDialog">å–æ¶ˆ</v-btn>
					</v-card-actions>
				</v-card>
			</v-dialog>
			<!-- ä¿®æ”¹å¯†ç å¯¹è¯æ¡† -->
			<v-dialog v-model="passwordDialog" max-width="500px">
				<v-card>
					<v-card-title>ä¿®æ”¹å¯†ç </v-card-title>
					<v-card-text>
						<v-form ref="passwordForm">
							<v-text-field label="å½“å‰å¯†ç " v-model="passwordForm.currentPassword"
								type="password"></v-text-field>
							<v-text-field label="æ–°å¯†ç " v-model="passwordForm.newPassword" type="password"></v-text-field>
							<v-text-field label="ç¡®è®¤æ–°å¯†ç " v-model="passwordForm.confirmPassword"
								type="password"></v-text-field>
						</v-form>
					</v-card-text>
					<v-card-actions>
						<v-btn color="primary" @click="changePasswordConfirm">ç¡®è®¤</v-btn>
						<v-btn text @click="closePasswordDialog">å–æ¶ˆ</v-btn>
					</v-card-actions>
				</v-card>
			</v-dialog>
			<!-- ç™»å½•æ³¨å†Œ -->
			<v-snackbar v-model="showToast" :timeout="2000" color="orange" :top="true" style="text-align: center;">
				{{ errorMessage }}
			</v-snackbar>
			<v-dialog v-model="loginDialog" max-width="500" persistent>
				<v-card>
					<v-tabs v-model="tab">
						<v-tab>ç™»å½•</v-tab>
						<v-tab>æ³¨å†Œ</v-tab>
					</v-tabs>

					<v-tabs-items v-model="tab">
						<v-tab-item>
							<v-card-text>
								<v-text-field label="ç”¨æˆ·å" v-model="username" outlined maxlength="20"
									placeholder="è¯·è¾“å…¥ç”¨æˆ·å" clearable prepend-inner-icon="mdi-account"
									:rules="[v => !!v || 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º']"></v-text-field>
								<v-text-field label="å¯†ç " type="password" v-model="password" outlined maxlength="20"
									placeholder="è¯·è¾“å…¥å¯†ç " clearable prepend-inner-icon="mdi-lock"
									:rules="[v => !!v || 'å¯†ç ä¸èƒ½ä¸ºç©º']"></v-text-field>

							</v-card-text>
							<v-card-actions>
								<v-btn color="primary" @click="login" block>ç™»å½•</v-btn>
							</v-card-actions>
						</v-tab-item>

						<v-tab-item>
							<v-card-text>
								<!-- æ·»åŠ æ³¨å†Œè¡¨å•çš„å†…å®¹ -->
								<v-text-field label="ç”¨æˆ·å" v-model="newUsername" outlined outlined maxlength="20"
									placeholder="è¯·è¾“å…¥ç”¨æˆ·å" prepend-inner-icon="mdi-account"
									:rules="[v => !!v || 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º']"></v-text-field>
								<v-text-field label="é‚®ç®±" v-model="newEmail" outlined outlined maxlength="50"
									placeholder="è¯·è¾“å…¥é‚®ç®±" prepend-inner-icon="mdi-email"
									:rules="[v => !!v || 'é‚®ç®±ä¸èƒ½ä¸ºç©º', v => /.+@.+\..+/.test(v) || 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®']"></v-text-field>
								<v-text-field label="å¯†ç " type="password" v-model="newPassword" outlined maxlength="20"
									placeholder="è¯·è¾“å…¥å¯†ç " clearable prepend-inner-icon="mdi-lock"
									:rules="[v => !!v || 'å¯†ç ä¸èƒ½ä¸ºç©º']"></v-text-field>
								<v-text-field label="ç¡®è®¤å¯†ç " type="password" v-model="confirmPassword" outlined
									maxlength="20" placeholder="è¯·è¾“å…¥å¯†ç " clearable prepend-inner-icon="mdi-lock"
									:rules="[v => !!v || 'ç¡®è®¤å¯†ç ä¸èƒ½ä¸ºç©º', v => newPassword === v || 'ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´']"></v-text-field>
							</v-card-text>
							<v-card-actions>
								<v-btn color="primary" @click="register" block>æ³¨å†Œ</v-btn>
							</v-card-actions>

						</v-tab-item>
					</v-tabs-items>
				</v-card>
			</v-dialog>



			<!-- å†³ç­–æ ‘ -->
			<v-dialog v-model="showTreeDialog" max-width="1000px" @opened="drawDecisionTree">
				<v-card>
					<v-card-title>å†³ç­–æ ‘</v-card-title>
					<v-card-text>
						<svg width="960" height="600"></svg>
						<script src="https://d3js.org/d3.v7.min.js"></script>
						<script src="../js/tree.js"></script>
					</v-card-text>
					<v-card-actions>
						<v-btn color="primary" @click="showTreeDialog = false">å…³é—­</v-btn>
					</v-card-actions>
				</v-card>
			</v-dialog>

			<!--åˆ›å»ºåŠ©æ‰‹-->
			<v-dialog v-model="assistantDialog" max-width="500">
				<v-card>
					<v-tabs v-model="tab">
						<v-tab>è‡ªå®šä¹‰</v-tab>
						<!-- 						<v-tab>è‡ªç”±åˆ›ä½œ</v-tab> -->

						<v-tab-item>
							<v-card>
								<v-card-title>åˆ›å»ºæ–°åŠ©æ‰‹</v-card-title>
								<v-card-text>
									<v-row dense>
										<v-col cols="12">
											<v-text-field label="å§“å" outlined prepend-inner-icon="mdi-account"
												v-model="assistant.name" maxlength="20"></v-text-field>
										</v-col>
										<v-col cols="12">
											<v-text-field label="æè¿°" outlined prepend-inner-icon="mdi-information"
												v-model="assistant.description" maxlength="200"></v-text-field>
										</v-col>
										<v-col cols="12">
											<v-text-field label="åŠŸèƒ½" outlined prepend-inner-icon="mdi-cog"
												v-model="assistant.function" maxlength="200"></v-text-field>
										</v-col>
										<v-col cols="12">
											<v-text-field label="ä¸ªäººä¿¡æ¯" outlined prepend-inner-icon="mdi-account-details"
												v-model="assistant.user_detail" maxlength="200"></v-text-field>
										</v-col>
									</v-row>
								</v-card-text>
								<v-card-actions class="justify-end">
									<v-btn color="primary" @click="saveAssistant">åˆ›å»º</v-btn>
									<v-btn @click="closeAssistantDialog">å–æ¶ˆ</v-btn>
								</v-card-actions>
							</v-card>
						</v-tab-item>
						<!-- 
						<v-tab-item>
							<v-card>
								<v-card-title>è‡ªç”±åˆ›ä½œ</v-card-title>
								<v-card-text>
									<v-row dense>
										<v-col cols="12">
											<v-textarea label="è¯·è¾“å…¥å†…å®¹" v-model="textContent" clearable auto-grow outlined
												rows="3"></v-textarea>
										</v-col>
									</v-row>
								</v-card-text>
								<v-card-actions class="justify-end">
									<v-btn color="primary" @click="createContent">åˆ›å»º</v-btn>
									<v-btn @click="closeAssistantDialog">å–æ¶ˆ</v-btn>
								</v-card-actions>
							</v-card>
						</v-tab-item> -->

					</v-tabs>
				</v-card>
			</v-dialog>

			<!--  -->
			<v-app id="inspire">
				<v-system-bar app>
					<v-spacer></v-spacer>
					<v-btn icon @click="showSettingsDialog">
						<!-- è®¾ç½®å›¾æ ‡ -->
						<v-icon>mdi-cog</v-icon>
					</v-btn>

					<!-- åˆ‡æ¢æ—¥å¤œæ¨¡å¼æŒ‰é’® -->
					<v-btn icon @click="toggleDarkMode">
						<v-icon>{{ darkMode ? 'mdi-white-balance-sunny' : 'mdi-brightness-2' }}</v-icon>
					</v-btn>

					<!-- åˆ‡æ¢å¤šè¯­è¨€æ¨¡å‹æŒ‰é’® -->
					<v-btn icon @click="toggleLanguage">
						<v-icon>mdi-translate</v-icon>
					</v-btn>
				</v-system-bar>

				<v-app-bar app clipped-right flat height="72">
					<v-icon :color="moodColor" @click="toggleMood">{{ moodIcon }}</v-icon>
					<v-toolbar-title>{{ chatTitle }}</v-toolbar-title>
					<v-spacer></v-spacer>
					<v-tooltip bottom>
						<!-- å³ä¾§æ²‰æµ¸æ¨¡å¼æŒ‰é’® -->
						<template v-slot:activator="{ on }">
							<v-icon v-on="on" class="icon">mdi-fullscreen</v-icon>
						</template>
						<span>æ²‰æµ¸æ¨¡å¼</span>
					</v-tooltip>
					<!-- åˆ é™¤èŠå¤©è®°å½•çš„å›¾æ ‡æŒ‰é’® -->
					<v-tooltip bottom>
						<template v-slot:activator="{ on }">
							<v-icon v-on="on" class="icon" @click="clearChatHistory">mdi-delete</v-icon>
						</template>
						<span>åˆ é™¤èŠå¤©è®°å½•</span>
					</v-tooltip>
				</v-app-bar>

				<v-navigation-drawer v-model="drawer" app width="300">
					<v-navigation-drawer v-model="drawer" absolute mini-variant>
						<v-avatar class="d-block text-center mx-auto mt-4" size="36" @click="toggleMenu"
							style="cursor: pointer;">
							<v-img src="../img/a-lovely-human-being.png" alt="User Avatar"></v-img>
						</v-avatar>

						<v-divider class="mx-3 my-5"></v-divider>

						<v-btn icon size="28" class="d-block text-center mx-auto mb-9" @click="topage('')">
							<v-tooltip bottom>
								<template v-slot:activator="{ on }">
									<v-icon v-on="on">mdi-chat</v-icon>
								</template>
								<span>èŠå¤©</span>
							</v-tooltip>
						</v-btn>

						<v-btn icon size="28" class="d-block text-center mx-auto mb-9"
							@click="topage('/mind/views/data.html')">
							<v-tooltip bottom>
								<template v-slot:activator="{ on }">
									<v-icon v-on="on">mdi-database</v-icon>
								</template>
								<span>æ•°æ®</span>
							</v-tooltip>
						</v-btn>

						<v-btn icon size="28" class="d-block text-center mx-auto mb-9"
							@click="topage('/mind/views/warning.html')">
							<v-tooltip bottom>
								<template v-slot:activator="{ on }">
									<v-icon v-on="on">mdi-alert</v-icon>
								</template>
								<span>è­¦å‘Š</span>
							</v-tooltip>
						</v-btn>
						<!-- æ·»åŠ  VR å›¾æ ‡æŒ‰é’® -->
						<v-btn icon size="28" class="d-block text-center mx-auto mb-9"
							@click="topage('/mind/views/vr.html')">
							<v-tooltip bottom>
								<template v-slot:activator="{ on }">
									<v-icon v-on="on">mdi-eye</v-icon>
								</template>
								<span>VR</span>
							</v-tooltip>
						</v-btn>

						<!-- æ·»åŠ çŸ¥è¯†åº“å›¾æ ‡æŒ‰é’® -->
						<v-btn icon size="28" class="d-block text-center mx-auto mb-9"
							@click="topage('/mind/views/knowledge.html')">
							<v-tooltip bottom>
								<template v-slot:activator="{ on }">
									<v-icon v-on="on">mdi-book-open-page-variant</v-icon>
								</template>
								<span>çŸ¥è¯†åº“</span>
							</v-tooltip>
						</v-btn>
					</v-navigation-drawer>




					<v-btn width="100%" elevation="0" class="mx-3 my-3" @click="openAssistantDialog" block>
						<v-icon left>mdi-robot</v-icon>
						åˆ›å»ºæ–°åŠ©æ‰‹

						<v-icon right>mdi-plus</v-icon>

					</v-btn>
					<v-divider class="mx-3 my-3"></v-divider>
					<v-list class="pl-14" shaped>
						<v-list-item v-for="item in assistants" :key="item.id" link
							:active-class="selectedItem === item ? 'selected-item' : ''" @click="selectItem(item)">
							<v-list-item-content>
								<v-list-item-title>{{ item.name }}</v-list-item-title>
							</v-list-item-content>
						</v-list-item>
					</v-list>
				</v-navigation-drawer>


				<v-main>

					<!-- æ¶ˆæ¯åˆ—è¡¨ -->
					<v-container id="message-list" style="padding-bottom: 60px; overflow-y: auto;">
						<v-row v-for="(message, index) in messages" :key="index">
							<v-col cols="12">
								<div>
									<v-avatar size="40">
										<img :src="message.sender === 'robot' ? '../img/a-lovely-robot.png' : '../img/a-lovely-human-being.png'"
											alt="Avatar">
									</v-avatar>
									<span
										style="font-weight: bold;">{{ message.sender === 'robot' ? 'å°æµ·' : 'ä½ ' }}</span>
									<!-- å¦‚æœæ¶ˆæ¯ä¸º ï¼Œæ˜¾ç¤ºåŠ è½½ä¸­çš„è¿›åº¦åœ† -->
									<v-progress-circular
										v-if="message.content === 'æ€è€ƒä¸­...' || message.content === 'åˆå§‹åŒ–å¿ƒç†åŠ©æ‰‹...' || message.content === 'æŸ¥è¯¢å¿ƒç†å­¦çŸ¥è¯†åº“ä¸­...'"
										indeterminate color="primary" size="16"></v-progress-circular>
								</div>
								<div>
									<span>{{ message.content }}</span>
								</div>
								<div v-if="message.content === 'æŸ¥è¯¢å¿ƒç†å­¦çŸ¥è¯†åº“ä¸­...'" class="query-link-box">
									<v-btn :href="generateQueryLink(message)" target="_blank" color="primary"
										small>æŸ¥çœ‹æŸ¥è¯¢ç»“æœ</v-btn>
								</div>
								<div class="icon-container">
									<!-- å¤åˆ¶æ–‡æœ¬çš„å›¾æ ‡ -->
									<v-tooltip bottom v-if="message.sender === 'robot'">
										<template v-slot:activator="{ on }">
											<v-icon v-on="on" size="18" class="icon mdi-content-copy"
												@click="copyToClipboard(message.content)">mdi-content-copy</v-icon>
										</template>
										<span>å¤åˆ¶æ–‡æœ¬</span>
									</v-tooltip>
									<!-- å†³ç­–æ ‘çš„å›¾æ ‡ -->
									<v-tooltip bottom v-if="message.sender === 'robot'">
										<template v-slot:activator="{ on }">
											<v-icon v-on="on" size="18" class="icon mdi-shape-outline"
												@click="showTreeDialog = true">mdi-shape-outline</v-icon>
										</template>
										<span>å†³ç­–æ ‘</span>
									</v-tooltip>
									<!-- å€’èµçš„å›¾æ ‡ -->
									<v-tooltip bottom v-if="message.sender === 'robot'">
										<template v-slot:activator="{ on }">
											<v-icon v-on="on" size="18" class="icon mdi-thumb-down-outline"
												@click="daozan(message)">mdi-thumb-down-outline</v-icon>
										</template>
										<span>å€’èµ</span>
									</v-tooltip>
									<!-- è¯­éŸ³æ’­æ”¾çš„å›¾æ ‡ -->
									<!-- <v-tooltip bottom v-if="message.sender === 'robot'">
            <template v-slot:activator="{ on }">
              <v-icon v-on="on" size="18" class="icon mdi-play-circle-outline">mdi-play-circle-outline</v-icon>
            </template>
            <span>è¯­éŸ³æ’­æ”¾</span>
          </v-tooltip> -->
								</div>
							</v-col>
						</v-row>
					</v-container>

				</v-main>

				<v-footer app height="72" inset>
					<v-text-field v-model='newMessage' background-color="lighten-3" dense flat hide-details rounded solo
						placeholder="ä»Šå¤©æƒ³åˆ†äº«ç‚¹ä»€ä¹ˆï¼Ÿ">
						<template v-slot:append>
							<v-btn icon @click="sendMessage">
								<v-icon>mdi-arrow-up</v-icon>
							</v-btn>
						</template>
					</v-text-field>
					<div class="warn" style="font-size: small;">
						å†…å®¹ç”±AIç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒï¼Œè¯·éµå®ˆ<a href="./contract.html">ã€Šå¿ƒè†å®ˆæŠ¤ç”¨æˆ·åè®®ã€‹</a>å’Œ<a
							href="./Privacy_Policy.html">ã€Šéšç§æ”¿ç­–ã€‹</a>
					</div>
				</v-footer>
			</v-app>

		</div>

		<style>
			.node circle {
				fill: #fff;
				stroke: steelblue;
				stroke-width: 3px;
			}

			.highlight circle {
				fill: orange;
				stroke: red;
				stroke-width: 3px;
			}

			.node text {
				font: 12px sans-serif;
			}

			.link {
				fill: none;
				stroke: #ccc;
				stroke-width: 2px;
			}

			.highlight-link {
				stroke: orange;
				stroke-width: 3px;
			}
		</style>
		<style>
			/* #regionå›¾æ ‡ */
			@font-face {
				font-family: 'iconfont';
				src: url('../public/iconfont.woff2?t=1710768339274') format('woff2'),
					url('../public/iconfont.woff?t=1710768339274') format('woff'),
					url('../public/iconfont.ttf?t=1710768339274') format('truetype');
			}

			.iconfont {
				font-family: "iconfont" !important;
				font-size: 16px;
				font-style: normal;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
			}

			/* #endregionå›¾æ ‡ */
			/* .new-dialog,.oppointment,.report,.community,.immerse {
    margin-left: 25px;
} */
			/* æ·»åŠ é¼ æ ‡æ‰‹å‹ */
			.avatar:hover {
				cursor: pointer;
			}

			/* æ·»åŠ é¼ æ ‡ç§»å…¥æ•ˆæœ */
			.avatar:hover {
				background-color: #868686;
				/* æ·¡ç°è‰²èƒŒæ™¯ */
			}

			.selected-item {
				background-color: #EDEDED;
				/* ä¿®æ”¹é€‰ä¸­åçš„èƒŒæ™¯è‰² */
				/* å…¶ä»–æ ·å¼ä¿®æ”¹ */
			}

			.oppointment,
			.report,
			.community,
			.immerse {
				height: 72px;
				line-height: 72px;
				padding: 0 25px;
			}

			a {
				text-decoration: none;
			}

			.warn {
				margin-left: 18px;
				font-size: small;
			}

			.theme--light .oppointment:hover {
				background-color: #EDEDED;
			}

			.theme--light .report:hover {
				background-color: #EDEDED;
			}

			.theme--light .community:hover {
				background-color: #EDEDED;
			}

			.theme--light .immerse:hover {
				background-color: #EDEDED;
			}

			.theme--dark .oppointment:hover {
				background-color: #383838;
			}

			.theme--dark .report:hover {
				background-color: #383838;
			}

			.theme--dark .community:hover {
				background-color: #383838;
			}

			.theme--dark .immerse:hover {
				background-color: #383838;
			}

			.icon-container {
				display: flex;
				justify-content: flex-start;
				margin-top: 5px;
				/* æ·»åŠ ä¸€ç‚¹é—´è· */
			}

			.icon {
				cursor: pointer;
				/* æ·»åŠ é¼ æ ‡æ‰‹å‹ */
				margin-right: 10px;
				/* æ·»åŠ å›¾æ ‡ä¹‹é—´çš„é—´è· */
				font-size: 10px;
				/* è°ƒæ•´å›¾æ ‡å¤§å° */
			}

			#decision-tree {
				width: 100%;
				height: 100%;
			}
		</style>
		<script src="https://d3js.org/d3.v6.min.js"></script>

		<script>
			new Vue({
				el: '#app',
				vuetify: new Vuetify({
					icons: {
						iconfont: 'mdi', // é»˜è®¤å›¾æ ‡é›†
					},
					theme: {
						dark: false
					}
				}),
				data() {
					return {
						// ä¸ªäººèµ„æ–™
						profileDialog: false,
						userProfile: {
							username: 'ç”¨æˆ·123', // ç¤ºä¾‹æ•°æ®
							email: 'user123@example.com' // ç¤ºä¾‹æ•°æ®
						},
						passwordForm: {
							currentPassword: '',
							newPassword: '',
							confirmPassword: ''
						},
						// å†³ç­–æ ‘
						showTreeDialog: false,
						// ç”¨æˆ·ä¿¡æ¯
						userId: 0,
						username: "",
						password: "",
						email: "",
						// ç•Œé¢çŠ¶æ€
						drawer: true,
						settingsDialog: false,
						loginDialog: false,
						showToast: false,
						errorMessage: '',
						tab: 0,
						// åŠ©æ‰‹ç›¸å…³
						selectedItem: null,
						selectId: 0,
						assistants: [],
						assistant: {
							name: '',
							description: '',
							function: '',
							user_detail: ''
						},
						assistantDialog: false,
						// æ¶ˆæ¯ç›¸å…³
						chatTitle: "",
						messages: [{
							sender: 'robot',
							content: 'æ¬¢è¿æ¥åˆ°å¿ƒè†å®ˆæŠ¤ï¼Œ è®©æˆ‘ä»¬ä¸€èµ·æ¥è¿›è¡Œå¿ƒç†æ¢è®¨å’Œäº¤æµå§ã€‚ æˆ‘å¯ä»¥ä¸ºæ‚¨æŸ¥æ‰¾å¿ƒç†çŸ¥è¯†ã€æ·±å…¥åˆ†æå¿ƒç†é—®é¢˜å’Œä¸ºä½ æä¾›å®‰å…¨ä¿æŠ¤ã€‚ğŸ¤—ğŸ¤—ğŸ¤— '
						}],
						newMessage: "",
						// æ³¨å†Œç”¨æˆ·
						newUsername: "",
						newPassword: "",
						confirmPassword: "",
						newEmail: "",
						// ç”¨æˆ·æ“ä½œ
						menuOpen: false,
						passwordDialog: false,
						// ç³»ç»Ÿè®¾ç½®
						showProfile: false,
						notificationTypes: [],
						notificationType: '',
						receiveEmail: true,
						languages: [],
						// å…¶ä»–è®¾ç½®
						darkMode: false,
						language: true,
						mood: 'mdi-emoticon-happy-outline',
						url: 'http://8.134.48.111:8000/api',
						// å¿ƒæƒ…
						moodIcon: "mdi-emoticon-outline",
						moodColor: "black",
						immersiveMode: false,
						// å†³ç­–æ ‘
						treeData: {
							name: "ç”¨æˆ·",
							children: [{
								name: "åˆ¤æ–­å†…å®¹ç±»å‹",
								children: [{
										name: "RAGçŸ¥è¯†åº“æŸ¥è¯¢ç³»ç»Ÿ",
									},
									{
										name: "å¿ƒç†å¤§è¯­è¨€æ¨¡å‹åŠ©æ‰‹",
									},
									{
										name: "å¿ƒç†çŠ¶æ€é¢„è­¦ç³»ç»Ÿ",
									},
								],
							}, ],
						},
					};
				},
				mounted() {

					this.darkMode = this.getCookie("darkMode");
					this.$vuetify.theme.dark = this.getCookie("darkMode");

					this.checkAuthentication();
					window.addEventListener('keydown', this.handleHotkey);
					// åŠ è½½æœ¬åœ°å­˜å‚¨çš„å†å²æ¶ˆæ¯
					const storedMessages = localStorage.getItem('chatMessages');
					if (storedMessages) {
						this.messages = JSON.parse(storedMessages);
					}
				},
				methods: {
					// æ‰“å¼€ä¿®æ”¹å¯†ç å¯¹è¯æ¡†
					openPasswordDialog() {
						this.passwordDialog = true;
					},
					// å…³é—­ä¿®æ”¹å¯†ç å¯¹è¯æ¡†
					closePasswordDialog() {
						this.passwordDialog = false;
					},
					// å¤„ç†æ²‰æµ¸æ¨¡å¼æŒ‰é’®ç‚¹å‡»äº‹ä»¶
					handleImmersionModeClick() {
						this.showSnackbar();
					},
					// æ˜¾ç¤º Snackbar
					showSnackbar() {
						this.isSnackbarVisible = true;
					},
					// å…³é—­ Snackbar
					closeSnackbar() {
						this.isSnackbarVisible = false;
					},
					clearChatHistory() {
						// åˆ é™¤èŠå¤©è®°å½•
						localStorage.removeItem('chatMessages'); // å‡è®¾èŠå¤©è®°å½•å­˜å‚¨åœ¨'chatHistory'é”®ä¸‹
						// ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…¶ä»–éœ€è¦åˆ é™¤çš„ç¼“å­˜é¡¹


						// æç¤ºç”¨æˆ·èŠå¤©è®°å½•å·²åˆ é™¤
						this.errorMessage = "èŠå¤©è®°å½•å·²åˆ é™¤",
							this.showToast = true,
							this.messages = [{
								sender: 'robot',
								content: 'æ¬¢è¿æ¥åˆ°å¿ƒè†å®ˆæŠ¤ï¼Œ è®©æˆ‘ä»¬ä¸€èµ·æ¥è¿›è¡Œå¿ƒç†æ¢è®¨å’Œäº¤æµå§ã€‚ æˆ‘å¯ä»¥ä¸ºæ‚¨æŸ¥æ‰¾å¿ƒç†çŸ¥è¯†ã€æ·±å…¥åˆ†æå¿ƒç†é—®é¢˜å’Œä¸ºä½ æä¾›å®‰å…¨ä¿æŠ¤ã€‚ğŸ¤—ğŸ¤—ğŸ¤— '
							}]

					},
					drawDecisionTree() {
						// ç­‰å¾…ä¸‹ä¸€æ¬¡ DOM æ›´æ–°å‘¨æœŸ
						this.$nextTick(() => {
							// è·å–å®¹å™¨å…ƒç´ 
							const container = document.getElementById("decision-tree");

							// æ¸…ç©ºä¹‹å‰çš„å›¾è¡¨
							container.innerHTML = "";

							// å®šä¹‰èŠ‚ç‚¹å’Œè¾¹
							const nodes = new vis.DataSet([{
									id: 1,
									label: "ç”¨æˆ·"
								},
								{
									id: 2,
									label: "åˆ¤æ–­å†…å®¹ç±»å‹"
								},
								{
									id: 3,
									label: "ragçŸ¥è¯†åº“æŸ¥è¯¢ç³»ç»Ÿ"
								},
								{
									id: 4,
									label: "å¿ƒç†å¤§è¯­è¨€æ¨¡å‹åŠ©æ‰‹"
								},
								{
									id: 5,
									label: "å¿ƒç†çŠ¶æ€é¢„è­¦ç³»ç»Ÿ"
								}
							]);

							const edges = new vis.DataSet([{
									from: 1,
									to: 2
								},
								{
									from: 2,
									to: 3
								},
								{
									from: 2,
									to: 4
								},
								{
									from: 2,
									to: 5
								}
							]);

							// åˆ›å»ºç½‘ç»œ
							const data = {
								nodes: nodes,
								edges: edges
							};
							const options = {
								layout: {
									hierarchical: {
										direction: "UD",
										sortMethod: "directed"
									}
								},
								physics: false
							};

							new vis.Network(container, data, options);
						});
					},
					daozan(message) {
						this.errorMessage = 'åé¦ˆæˆåŠŸï¼Œè°¢è°¢ï¼';
						this.showToast = true;
					},
					copyToClipboard(text) {
						if (navigator.clipboard) {
							navigator.clipboard.writeText(text).then(() => {
								this.errorMessage = 'æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
								this.showToast = true;
							}).catch(err => {
								this.fallbackCopyTextToClipboard(text);
							});
						} else {
							this.fallbackCopyTextToClipboard(text);
						}
					},

					fallbackCopyTextToClipboard(text) {
						// Create a temporary textarea element, set its value to the text to copy and append it to the body
						const textarea = document.createElement('textarea');
						textarea.value = text;
						document.body.appendChild(textarea);

						// Select the text in the textarea
						textarea.select();
						try {
							// Execute the copy command
							const result = document.execCommand('copy');
							if (result) {
								this.errorMessage = 'æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
								this.showToast = true;
							} else {
								this.errorMessage = 'å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•ï¼';
								this.showToast = true;
							}
						} catch (err) {
							this.errorMessage = 'å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•ï¼' + err;
							this.showToast = true;
						}

						// Remove the textarea from the body
						document.body.removeChild(textarea);
					},

					// æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
					checkAuthentication() {
						if (!this.getCookie("isAuthenticated")) {
							this.openLoginDialog();
						} else {
							this.userId = this.getCookie("user_id");
							this.username = this.getCookie("username");
							this.userProfile.username = this.username
							// this.userProfile.email=
							this.fetchAssistants();
						}
					},
					// è·å–åŠ©æ‰‹åˆ—è¡¨
					fetchAssistants() {
						axios.get(`${this.url}/assistant/listAll?user_id=${this.userId}`)
							.then(response => {
								const data = response.data;
								if (data.code === 200) {
									this.assistants = data.data;
									this.selectedItem = data.data[0];
									this.selectId = data.data[0].id;
									this.chatTitle = data.data[0].name;
								}
							})
							.catch(error => {
								console.error('Error fetching assistants:', error);
							});
					},
					getCookie(name) {
						// åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡
						const cookieMap = {};
						// è·å–å½“å‰é¡µé¢çš„cookieï¼Œå¹¶ä»¥åˆ†å·ç©ºæ ¼åˆ†å‰²
						const cookies = document.cookie.split("; ");
						// éå†cookieï¼Œå¹¶ä»¥ç­‰å·åˆ†å‰²ï¼Œå­˜å…¥cookieMapä¸­
						cookies.forEach(cookie => {
							const [key, value] = cookie.split("=");
							cookieMap[key] = value;
						});
						// è¿”å›cookieMapä¸­nameå¯¹åº”çš„å€¼
						return cookieMap[name];
					},
					setCookie(name, value, days) {
						// åˆå§‹åŒ–expires
						let expires = "";
						// å¦‚æœä¼ å…¥äº†dayså‚æ•°
						if (days) {
							// åˆ›å»ºä¸€ä¸ªDateå¯¹è±¡
							const date = new Date();
							// è®¾ç½®dateå¯¹è±¡çš„å€¼ï¼ŒåŠ ä¸Šdayså‚æ•°çš„å€¼ï¼Œè½¬æ¢ä¸ºæ¯«ç§’æ•°
							date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
							// è®¾ç½®expiresçš„å€¼ä¸ºåˆ†å·ç©ºæ ¼ï¼ŒåŠ ä¸Šdateå¯¹è±¡è½¬æ¢ä¸ºUTCæ—¶é—´æ ¼å¼
							expires = "; expires=" + date.toUTCString();
						}
						// è®¾ç½®cookieï¼Œå‚æ•°ä¸ºnameï¼Œvalueï¼Œexpires
						document.cookie = name + "=" + (value || "") + expires + "; path=/";
					},
					showSettingsDialog() {
						this.settingsDialog = true;
					},
					closeSettingsDialog() {
						this.settingsDialog = false;
					},
					saveSettings() {
						// ä¿å­˜è®¾ç½®çš„é€»è¾‘
						console.log('ä¿å­˜è®¾ç½®');
						this.closeSettingsDialog(); // ä¿å­˜åå…³é—­è®¾ç½®çª—ä½“
					},
					// æ‰“å¼€ç™»å½•çª—å£
					openLoginDialog() {
						this.loginDialog = true;
					},
					// å…³é—­ç™»å½•çª—å£
					closeLoginDialog() {
						this.loginDialog = false;
					},
					// ç”¨æˆ·ç™»å½•
					login() {
						if (this.username && this.password) {
							axios.post(`${this.url}/user/login`, {
									username: this.username,
									password: this.password
								})
								.then(response => {
									const data = response.data;
									if (data.code === 200) {
										const userData = data.data;
										this.setCookie("isAuthenticated", true, 1);
										this.setCookie("user_id", userData.id, 1);
										this.userId = userData.id;
										this.setCookie("username", userData.username, 1);
										this.username = userData.username;
										this.loginDialog = false;
										this.checkAuthentication();
										this.password = '';
									} else {
										console.error('Login failed:', response);
									}
								})
								.catch(error => {
									this.errorMessage = error.message;
									this.showToast = true;
								});
						} else {
							alert('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ');
						}
					},
					// æ³¨å†Œæ–°ç”¨æˆ·
					register() {
						// è¿™é‡Œæ·»åŠ æ³¨å†Œé€»è¾‘
						if (this.newUsername && this.newPassword && this.confirmPassword) {
							// æ£€æŸ¥å¯†ç æ˜¯å¦åŒ¹é…
							if (this.newPassword !== this.confirmPassword) {
								alert('ç¡®è®¤å¯†ç ä¸åŒ¹é…');
								return;
							}
							// è°ƒç”¨æ³¨å†Œæ¥å£æˆ–è€…å…¶ä»–æ³¨å†Œé€»è¾‘
							// è°ƒç”¨ç™»å½•æ¥å£æˆ–è€…å…¶ä»–ç™»å½•é€»è¾‘
							axios.post(this.url + "/user/register", {
								username: this.newUsername,
								password: this.newPassword,
								email: this.newEmail,

							}).then(response => {
								data = response.data
								// ç™»å½•æˆåŠŸåå…³é—­å¯¹è¯æ¡†
								if (data.code == 200) {

									// æ³¨å†ŒæˆåŠŸååˆ‡æ¢åˆ°tab
									this.tab = 0;
									// æ¸…ç©ºæ³¨å†Œè¡¨å•å­—æ®µ
									this.newUsername = '';
									this.newPassword = '';
									this.confirmPassword = '';
									this.newEmail = '';
									// æ¸…ç©ºç™»å½•è¡¨å•å­—æ®µ
									this.username = '';
									this.password = '';
								} else {
									console.log(response)
								}

							}).catch(error => {
								this.errorMessage = error.message;
								this.showToast = true;
							});

						}
					},
					selectItem(item) {
						this.selectedItem = item;
						console.log(item)
						this.chatTitle = item.name
						this.selectId = item.id
						// æ‰§è¡Œé€‰ä¸­åçš„é€»è¾‘
					},
					toggleLoginDialog() {
						this.loginDialog = !this.loginDialog;
					},
					toggleMood() {
						// åˆ‡æ¢å¿ƒæƒ…å›¾æ ‡å’Œé¢œè‰²
						if (this.moodIcon === "mdi-emoticon-outline") {
							this.moodIcon = "mdi-emoticon-happy-outline";
							this.moodColor = "yellow";
						} else {
							this.moodIcon = "mdi-emoticon-outline";
							this.moodColor = "black";
						}
					},
					topage(route) {
						window.open(route, "_self")

					},
					// åˆ‡æ¢æ—¥å¤œæ¨¡å¼
					toggleDarkMode() {
						this.darkMode = !this.darkMode;
						this.$vuetify.theme.dark = this.darkMode;
						this.setCookie('darkMode', this.darkMode, 1000)
					},
					// åˆ‡æ¢è¯­è¨€
					toggleLanguage() {
						this.language = !this.language;
						// æ·»åŠ åˆ‡æ¢è¯­è¨€çš„é€»è¾‘
					},
					// æ‰“å¼€åŠ©æ‰‹å¯¹è¯æ¡†
					openAssistantDialog() {
						this.assistantDialog = true;
					},
					// å…³é—­åŠ©æ‰‹å¯¹è¯æ¡†
					closeAssistantDialog() {
						this.assistantDialog = false;
					},
					saveAssistant() {
						// æ£€æŸ¥è¾“å…¥å†…å®¹çš„åˆç†
						if (!this.assistant.name || !this.assistant.description || !this.assistant.function || !
							this
							.assistant.user_detail) {
							this.errorMessage = 'è¯·è¾“å…¥å†…å®¹';
							this.showToast = true;
							return;

						} else {

							this.loading = true;
							// const aiResponse = await axios.post(`${this.url}/assistant/ai/choice`, {
							// 	message: sendMessage,
							// 	user_id: this.userId
							// }, {
							// 	headers: {
							// 		'Content-Type': 'application/x-www-form-urlencoded'
							// 	}
							// });
							// åœ¨è¿™é‡Œç¼–å†™ä¿å­˜åŠ©æ‰‹çš„é€»è¾‘
							// å¯ä»¥å‘é€è¯·æ±‚å°†è¾“å…¥æ¡†ä¸­çš„æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ç­‰
							axios.post(this.url + '/assistant/create', {
									user_id: parseInt(this.userId),
									name: this.assistant.name,
									description: this.assistant.description,
									function: this.assistant.function,
									user_detail: this.assistant.user_detail
								}, {
									headers: {
										'Content-Type': 'application/x-www-form-urlencoded',
									}
								})
								.then(response => {
									data = response.data
									if (data.code == 200) {
										this.loading = false;
										this.closeAssistantDialog();
										this.getNewAssistant(this.userId);
									}

								}).catch(error => {
									this.errorMessage = error.message;
									this.showToast = true;
								});
						}

						// ä¿å­˜æˆåŠŸåå…³é—­å¯¹è¯æ¡†
					},
					getNewAssistant(user_id) {
						axios.get(this.url + '/assistant/allList?user_id=' + user_id).then(response => {

							data = response.data
							if (data.code = 200) {
								this.assistants = data.data

							}
						})

					},
					// åœ¨é€‚å½“çš„åœ°æ–¹è°ƒç”¨æ­¤å‡½æ•°æ¥è·å–å†å²æ¶ˆæ¯
					async fetchChatHistory() {
						try {
							const response = await axios.get('/api/chat/history');
							const history = response.data.messages;
							// å¤„ç†å†å²æ¶ˆæ¯
							displayChatHistory(history);
						} catch (error) {
							console.error('Error fetching chat history:', error);
						}
					},

					// å°†å†å²æ¶ˆæ¯å±•ç¤ºåœ¨ç•Œé¢ä¸Šçš„å‡½æ•°ç¤ºä¾‹
					displayChatHistory(history) {
						// å‡è®¾ messages æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯æ¶ˆæ¯å¯¹è±¡ï¼Œå…·æœ‰ sender å’Œ content å±æ€§
						history.forEach(message => {
							const sender = message.sender;
							const content = message.content;
							// åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºå†å²æ¶ˆæ¯
							console.log(`[${sender}]: ${content}`);
						});
					},
					async sendMessage() {
						let sendMessage = this.newMessage;
						if (!this.newMessage.trim()) {
							this.vuetify.dialog.alert('è¯·è¾“å…¥æ¶ˆæ¯å†…å®¹');
							return;
						}
						// ä¿å­˜å‘é€çš„æ¶ˆæ¯åˆ°æœ¬åœ°å­˜å‚¨
						this.saveMessageLocally({
							sender: 'human',
							content: this.newMessage
						});
						this.messages.push({
							sender: 'human',
							content: this.newMessage
						});
						// æ˜¾ç¤ºâ€œæ€è€ƒä¸­...â€æ¶ˆæ¯
						this.messages.push({
							sender: 'robot',
							content: 'æ€è€ƒä¸­...'
						});
						this.newMessage = "";
						try {
							const messageResponse = await axios.post(`${this.url}/message/insert_message`, {
								user_id: this.userId,
								assistant_id: this.selectId,
								content: sendMessage
							});

							const aiResponse = await axios.post(`${this.url}/assistant/ai/choice`, {
								message: sendMessage,
								user_id: this.userId
							}, {
								headers: {
									'Content-Type': 'application/x-www-form-urlencoded'
								}
							});

							const data = aiResponse.data.assistant;
							this.updateUI(data, sendMessage);
						} catch (error) {
							console.error('Error:', error);
						}
					},
					async updateUI(data, sendMessage) {
						try {
							let response;
							let content = '';

							switch (data) {
								case "é€‰é¡¹A":
									this.messages[this.messages.length - 1].content = "åˆå§‹åŒ–å¿ƒç†åŠ©æ‰‹...";
									response = await axios.post(`${this.url}/assistant/ai/chat`, {
										message: sendMessage,
										assistant_id: this.selectId
									}, {
										headers: {
											'Content-Type': 'application/x-www-form-urlencoded'
										}
									});
									content = response.data.data;
									break;
								case "é€‰é¡¹B":
									this.messages[this.messages.length - 1].content = "æŸ¥è¯¢å¿ƒç†å­¦çŸ¥è¯†åº“ä¸­...";
									response = await axios.post(`${this.url}/assistant/ai/knowledge`, {
										message: sendMessage,
										assistant_id: this.selectId
									}, {
										headers: {
											'Content-Type': 'application/x-www-form-urlencoded'
										}
									});
									content = response.data.data;
									break;
								case "é€‰é¡¹C":
									this.messages[this.messages.length - 1].content = "æ£€æµ‹åˆ°å±é™©è¨€è®º!";
									this.showToast = true;
									this.errorMessage = "æ£€æµ‹åˆ°ä½ æœ‰å±é™©è¨€è®ºï¼Œå·²ç»å‘ç”Ÿæ¶ˆæ¯åˆ°ç´§æ€¥è”ç³»äºº";
									response = await axios.post(`${this.url}/assistant/ai/chat`, {
										message: sendMessage,
										assistant_id: this.selectId
									}, {
										headers: {
											'Content-Type': 'application/x-www-form-urlencoded'
										}
									});
									content = response.data.data;
									break;
								default:
									this.messages[this.messages.length - 1].content = "ç”Ÿæˆä¸­...";
									response = await axios.post(`${this.url}/assistant/ai/Samplychat`, {
										message: sendMessage,
									}, {
										headers: {
											'Content-Type': 'application/x-www-form-urlencoded'
										}
									});
									const contents = response.data.map(item => item.result.output.content);
									content = contents.join('');
							}

							// ä¿å­˜ AI è¿”å›çš„æ¶ˆæ¯åˆ°æœ¬åœ°å­˜å‚¨
							this.saveMessageLocally({
								sender: 'robot',
								content: content
							});
							// å…ˆæ¸…ç©º
							this.messages[this.messages.length - 1].content = '';
							// é€ä¸ªå­—ç¬¦èµ‹å€¼ç»™ content å±æ€§ï¼Œå¹¶æ¨¡æ‹Ÿæ‰“å°æ•ˆæœ
							let index = 0;
							const intervalId = setInterval(() => {
								if (index < content.length) {
									this.messages[this.messages.length - 1].content += content[
										index];
									index++;
								} else {
									clearInterval(intervalId); // ç»“æŸå¾ªç¯
								}
							}, 50); // æ¯100æ¯«ç§’è¾“å‡ºä¸€ä¸ªå­—ç¬¦
						} catch (error) {
							console.error('Error:', error);
						}
					},
					// ä¿å­˜æ¶ˆæ¯åˆ°æœ¬åœ°å­˜å‚¨
					saveMessageLocally(message) {
						// è·å–æœ¬åœ°å­˜å‚¨ä¸­çš„å†å²æ¶ˆæ¯ï¼ˆå¦‚æœæœ‰ï¼‰
						let storedMessages = localStorage.getItem('chatMessages');
						storedMessages = storedMessages ? JSON.parse(storedMessages) : [];

						// å°†æ–°æ¶ˆæ¯æ·»åŠ åˆ°å†å²æ¶ˆæ¯åˆ—è¡¨
						storedMessages.push(message);

						// å°†æ›´æ–°åçš„å†å²æ¶ˆæ¯åˆ—è¡¨é‡æ–°å­˜å‚¨åˆ°æœ¬åœ°å­˜å‚¨ä¸­
						localStorage.setItem('chatMessages', JSON.stringify(storedMessages));
					},
					// çƒ­é”®å¤„ç†å‡½æ•°
					handleHotkey(event) {
						// Enterï¼šå‘é€æ¶ˆæ¯
						if (event.keyCode === 13) {
							// è°ƒç”¨å‘é€æ¶ˆæ¯çš„æ–¹æ³•
							this.sendMessage();
						}
						// ctrl+enteré”®ï¼šæ¢è¡Œ
						if (event.ctrlKey && event.keyCode === 13) {
							// è¾“å…¥æ¡†æ¢è¡Œ
						}
					},
					// ç”¨æˆ·æ“ä½œ
					toggleMenu() {
						this.menuOpen = !this.menuOpen;
					},
					// æŸ¥çœ‹ä¸ªäººä¿¡æ¯
					viewProfile() {
						// Add logic to view profile
						this.profileDialog = true;
						this.menuOpen = false;
					},
					// æ›´æ”¹å¯†ç 
					changePassword() {
						this.passwordDialog = true;
						this.menuOpen = false;
					},
					// é€€å‡ºç™»å½•
					logout() {
						// æ¸…ç©ºcookieç¼“å­˜å¹¶é‡æ–°åŠ è½½é¡µé¢
						document.cookie = "user_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
						document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
						document.cookie = "isAuthenticated=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
						location.reload();
						this.menuOpen = false;
					},
					// æäº¤å¯†ç ä¿®æ”¹è¯·æ±‚
					submitPassword() {
						// æ£€æŸ¥æ–°å¯†ç å’Œç¡®è®¤å¯†ç æ˜¯å¦ä¸€è‡´
						if (this.password !== this.confirmPassword) {
							this.error = 'å¯†ç ä¸ä¸€è‡´';
							return;
						}
						// å‘é€å¯†ç ä¿®æ”¹è¯·æ±‚ï¼Œè¿™é‡Œåªæ˜¯ç¤ºä¾‹ï¼Œéœ€è¦æ›¿æ¢ä¸ºå®é™…çš„è¯·æ±‚é€»è¾‘
						// å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨axioså‘é€ä¿®æ”¹å¯†ç çš„è¯·æ±‚
						// ä¿®æ”¹å¯†ç æˆåŠŸåï¼Œå…³é—­å¯¹è¯æ¡†ï¼Œå¹¶æ¸…ç©ºå¯†ç è¾“å…¥æ¡†å’Œé”™è¯¯æç¤º
						this.changePasswordDialog = false;
						this.password = '';
						this.confirmPassword = '';
						this.error = '';
					}

				},
				beforeDestroy() {
					// åœ¨ç»„ä»¶é”€æ¯å‰ç§»é™¤çƒ­é”®ç›‘å¬å™¨
					window.removeEventListener('keydown', this.handleHotkey);
				}

			})
		</script>

	</body>
</html>